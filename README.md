# Machine-9 "INFOSEC PREP: OSCP"
Target-ын мэдэээл авах **netdiscover** командыг хийснээр бидний зорилтот IP гэж юу болохыг харах боломжтой

![image](https://github.com/Bultuush/Machine-9/assets/129934501/b85b6df0-8fec-4add-9690-2786b72f8c86)

Дараа нь бид nmap ашиглан нээлттэй портуудыг олох хэрэгтэй.

![image](https://github.com/Bultuush/Machine-9/assets/129934501/3f8e2256-3141-4fe1-93d1-a67a19f9095c)

Хэрэглэгчийн flag ашиглаж байна: Бид **SSH (22)** болон **HTTP (80)** гэсэн гурван нээлттэй портыг олж илрүүлсэн.

![image](https://github.com/Bultuush/Machine-9/assets/129934501/8f0e3605-bcf4-459a-9e3d-10ec338c1f52)

Хайрцагны хэрэглэгч нь бидний танд өгсөн цорын ганц зөвлөмжийн дагуу oscp юм.

![image](https://github.com/Bultuush/Machine-9/assets/129934501/cb2985b8-afcf-4799-a0b4-039b563b7d9c)

Одоогийн байдлаар таны вэбд суурилсан сканнердах хэрэгслүүд сонирхолтой зүйлтэй буцаж ирсэн байх ёстой. Ялангуяа robots.txt файл эсвэл secret.txt файлыг аль хэдийн олсон байж магадгүй. Энэ файлд зочилсны дараа та үндсэн 64 кодчилолтой олон тооны текстийг харах болно:

![image](https://github.com/Bultuush/Machine-9/assets/129934501/30c0c2c7-fcf4-477c-8941-7a14095b629e)

base64 кодлогдсон текстийг cat file.txt | ашиглан base64 декодероор шидэх base64 -d бөгөөд та энэ нь oscp хэрэглэгчийн хувийн түлхүүр гэдгийг харах болно: (Би доорх жишээн дээр үүнийг зүгээр л мушгихаар сонгосон)

![image](https://github.com/Bultuush/Machine-9/assets/129934501/fbd69944-cad3-471c-974d-17a4a4c7dc27)

Үүнийг id_rsa гэх мэт файл руу хуулж эсвэл нэрлэхийг хүссэн бүхнээ хийнэ үү.

Дараа нь зүгээр л **ssh oscp@IP_ADDRESS -i id_rsa** гэж бичээд та нэвтэрч байна!

![image](https://github.com/Bultuush/Machine-9/assets/129934501/1516623d-33e9-4998-a43c-3d2a676b64e4)

Зорилтот давуу эрх нэмэгдүүлэх: suid bash binary
Та системд орсныхоо дараа Linux Smart Enumeration, LinPEAS гэх мэт мөлжлөгийн дараах нэг буюу олон скриптийг эхлүүлэх болно.

Та /bin/bash дээрх зөвшөөрөл бага зэрэг сул байгааг анзаарсан байх. Ихэвчлэн /bin/bash-д setuid бит байдаггүй:

![image](https://github.com/Bultuush/Machine-9/assets/129934501/3eaf2aed-33cd-4e47-92a8-c6ac9547ace4)

![image](https://github.com/Bultuush/Machine-9/assets/129934501/9615e330-aa61-4189-90db-e69009209cbc)

Төлөвлөөгүй давуу эрхийн өсөлт №1: ip скрипт
Энэ аргын бичгийг Discord дээр tjc_#5043 хийсэн

Мэдээлэл цуглуулах
oscp хэрэглэгчээр нэвтэрсний дараа ip скрипт oscp home директорт байгааг харж болно. Энэ нь root эзэмшдэг боловч бид үүнийг унших чадвартай.

Үүнийг хэрхэн дуудаж байгааг харахын тулд бид grep хайлтыг ажиллуулж болно. Хайлт хийх хамгийн магадлалтай газар бол /etc/ лавлах юм:

![image](https://github.com/Bultuush/Machine-9/assets/129934501/af07fe97-43fd-42a2-8803-f0de6e3ee13f)

Дараа нь бид ip-update үйлчилгээг яг яаж дуудаж байгааг шалгах боломжтой.

![image](https://github.com/Bultuush/Machine-9/assets/129934501/db7b1c0e-aa51-4109-aff0-e68748772104)

Хэрэглэгчийн мэдээлэл байхгүй тул бид ip скриптийг root хэлбэрээр ажиллуулдаг гэдгийг мэдэж байна. Скрипт нь oscp хэрэглэгчийн лавлахад байгаа тул бид одоогийн скриптийн нэрийг өөрчилж, root хэлбэрээр ажиллах өөрийн скриптийг үүсгэж болно.

# /root/files жагсаах
WordPress нийтлэл нь туг нь /root/ директорт байгааг хэлдэг. Тиймээс эхний алхам бол тухайн директор доторх бүх файлуудыг жагсаах явдал юм. Одоогийн IP скриптийн нэрийг өөрчилж, шинээр үүсгээд гүйцэтгэх боломжтой болго:

![image](https://github.com/Bultuush/Machine-9/assets/129934501/dfddc5c4-ff4f-4cb1-b4ad-3815cec08394)

![image](https://github.com/Bultuush/Machine-9/assets/129934501/4eeb8009-f484-4756-817d-c727dbe5979d)
